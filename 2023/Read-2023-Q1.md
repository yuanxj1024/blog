
- [2023.03.01] [第五章 架构演化 - 微信 App](https://www.jiangguo.net/c/0pg/mog.html)

架构演进
  - 1.x时代，分层设计
  - 2.x时代，多进程架构，独立通信进程、独立Webvie进程
  - 3.x时代，模块化架构，以产品功能进行解耦，使用多分支开发模式

问题：代码膨胀核
1.基础工程中业务代码膨胀且划分不合理糅合在基础工程中
2. 主工程中多模块生命周期堆积。

方案：
- 改变通信方式
	一种接口暴露的形式——“.api化”
- 重新设计模块
	重新定义了模块的生命周期，将模块的生命周期延长到应用启动和退出
- 约束代码边界
	从之前的经验看，要想约束好代码的边界不被破坏，编译上的隔离是唯一法宝。实现了一种简单易用、粒度更细的工程组织结构——pins工程结构


重构经验：
- “不被监管的代码也一定会发生劣化”。所以代码应该要接受“监管”。
- 在一个长期没有改进的框架下，开发者的习惯可能会逐步变成跟随式、保守式的开发.这种情况下代码和框架会随着时间变得越来越差，有些问题逐渐变成“陈年旧病”。

模块划分经验
- 维持代码边界.从以往的经验来看，编译上的隔离是最好的约束手段，单纯的约定或准则并不能永远的保持下去
- 划定模块边界的细节问题.能自圆其说的方案往往就足够了，试着对代码“讲一个符合逻辑的故事”，哪个故事讲得通，你就可以将之作为拆分的选择

总结：
用纯粹的模块化保持后续架构的灵活性和健壮性，重新强调依赖、强调应用状态和生命周期、强化代码的边界。

---

- [2023.03.01] [Android组件化初探](https://www.jiangguo.net/c/0pg/dd2.html)

目的：降低成本（维护、迭代、开发）

模块化：把不同的业务模块放到不同的moudle中，实现各个业务之间的解耦，他们又共同依赖底层公共库

模块化是按功能模块进行查分（业务导向），组件化是按功能模块进行查分（功能导向）

> 其他资料
>  - [架构演化-智行或者票App](https://www.jiangguo.net/c/0pg/54e.html)
>  - [架构演化 - 得到 App](https://www.jiangguo.net/c/0pg/g0z.html), 开源： [JIMU](https://github.com/mqzhangw/JIMU)
>  - [第五章 架构演化 - 微信 App](https://www.jiangguo.net/c/0pg/mog.html)

---


- [2023.02.20] [从 polyrepo 到 monorepo，前端代码仓库改造工程实践](https://mp.weixin.qq.com/s/9KOr5-C5cidp0te1IEg6vg)
  >  polyrepo 是指每个应用或库分别拥有各自的代码仓库，不会和其他代码仓库合并
  
  > 问题：维护多包依赖关系成本问题

  > 方案： Yarn workspace

  - 实践
    - 实现转化 monorepo 的CLI工具

